<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=750, initial-scale=1">
	<title>Pokedex - Family</title>
	
	<link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="../index.css" />
	
	<style type="text/css">
	
/* The navigation bar */
.sort-header {
	z-index: 100;
	overflow: hidden;
	background-color: #333;
	position: fixed; /* Set the sort-header to fixed position */
	left: 0;
	top: 0; /* Position the sort-header at the top of the page */
	width: 100%; /* Full width */
	height: 50px;
	
	display: flex;
	justify-content: center; /* align horizontal */
	align-items: center; /* align vertical */
	
	font-family: 'Ubuntu', sans-serif;
	color: #000;
	font-size: xx-large;
	font-weight: bold;
	-webkit-text-stroke: 1px #000;
	-webkit-text-fill-color: #FFF;
}

.sort-header span {
	font-size: x-large;
	font-weight: bold;
}

/* Links inside the sort-header */
.sort-button, .sort-header span {
	color: #f2f2f2;
	text-align: center;
	text-decoration: none;
}

.sort-button {

	text-align: center;
	vertical-align: middle;
	
	padding-left: 20px;
	padding-right: 20px;
	
	cursor: pointer;
	user-select: none;
}

/* Change background on mouse-over */
.sort-button:hover, 
.sort-button:focus,  {
	background: #ccc;
	color: black;
}

.sort-button.ascending {
	background: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgaWQ9InN2ZzgiCiAgIHZlcnNpb249IjEuMSIKICAgdmlld0JveD0iMCAwIDE2LjkzMzMzMyAxNi45MzMzMzMiCiAgIGhlaWdodD0iNjQiCiAgIHdpZHRoPSI2NCI+CiAgPGRlZnMKICAgICBpZD0iZGVmczIiIC8+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNSI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgICA8ZGM6dGl0bGU+PC9kYzp0aXRsZT4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLC0yODAuMDY2NjcpIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIGQ9Im0gMTYuOTMzMzM0LDI5NS44NjU2OCAtOC40NjY2NjY3LDAgLTguNDY2NjY2NzI5NzU0MDYsMCBMIDQuMjMzMzMzOCwyODguNTMzMzMgOC40NjY2NjcyLDI4MS4yMDA5OCAxMi43LDI4OC41MzMzMyBaIgogICAgICAgaWQ9InBhdGg4MTciCiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDowLjI2OTk4NzI5IiAvPgogIDwvZz4KPC9zdmc+Cg==") no-repeat 99%;
	background-size: 20px;
}
.sort-button.descending {
	background: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgaWQ9InN2ZzgiCiAgIHZlcnNpb249IjEuMSIKICAgdmlld0JveD0iMCAwIDE2LjkzMzMzMyAxNi45MzMzMzMiCiAgIGhlaWdodD0iNjQiCiAgIHdpZHRoPSI2NCI+CiAgPGRlZnMKICAgICBpZD0iZGVmczIiIC8+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNSI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgICA8ZGM6dGl0bGU+PC9kYzp0aXRsZT4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLC0yODAuMDY2NjcpIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHRyYW5zZm9ybT0ic2NhbGUoLTEpIgogICAgICAgZD0ibSAtNi4xMzI3OTAyZS03LC0yODEuMjAxIC04LjQ2NjY2NjM4NjcyMDk4LDAgLTguNDY2NjY3LDAgNC4yMzMzMzMsLTcuMzMyMzUgNC4yMzMzMzM5LC03LjMzMjM1IDQuMjMzMzMzMiw3LjMzMjM1IHoiCiAgICAgICBpZD0icGF0aDgxNyIKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjAuMjY5OTg3MjkiIC8+CiAgPC9nPgo8L3N2Zz4K") no-repeat 99%;
	background-size: 20px;
}

/* Main content */
.sort-header-padding {
	width: 100%;
	height: 50px; /* Add a top margin to avoid content overlay */
}


.instructions {
	left: 0;
	width: 100%;
}

.instructions img {
	width: 100%;
}





		
	</style>
	
	
	<script type="text/javascript" src="../data/pokemonstats.js"> </script>
	<script type="text/javascript" src="../data/moves.js"> </script>
	<script type="text/javascript" src="../data/pokemonlist.js"> </script>
	
	<script type="text/javascript" src="data/all.js"> </script>
	<script type="text/javascript" src="data/all_family.js"> </script>
	<script type="text/javascript" src="data/lucky.js"> </script>
	<script type="text/javascript" src="data/purified.js"> </script>
	<script type="text/javascript" src="data/shiny.js"> </script>
	
	<script type="text/javascript" src="../pokemon.js"> </script>
	<script type="text/javascript" src="../pokedex.js"> </script>

	<script>




var currentSort = {};

function addSortHeader(parent, id, text, sortOn) {
	var element = document.createElement('a');
	element.className = 'sort-button';
	//element.href = '#' + id;
	element.innerText = text;
	element.dataset.id = id;
	element.dataset.text = text;
	element.dataset.sortOn = sortOn;
	
	element.addEventListener("click", function(e) {
	
		var sortValue = element.dataset.sortOn;
		var reverseSort = (currentSort.id == id) ? !currentSort.reverse : false;
		
		currentSort.id = element.dataset.id;
		currentSort.text = element.dataset.text;
		currentSort.value = element.dataset.sortOn;
		currentSort.reverse = reverseSort;
		
		parent.querySelectorAll('.sort-button').forEach( a => {
			a.classList.remove('active');
			a.classList.remove('ascending');
			a.classList.remove('descending');
		});
		element.classList.add('active');
		if (element.dataset.id != 'random') {
			element.classList.add(reverseSort ? 'descending' : 'ascending');
		}
		sortElementsBy(SORT_CONTAINER, SORT_ELEMENTS, element.dataset.sortOn, reverseSort);
	}, false);
	
	parent.appendChild(element);
	return element;
}

function sortElementsBy(container, elements, valueField, reverseSort) {

	while (container.hasChildNodes()) {
		container.removeChild(container.lastChild);
	}
	
	if (valueField == 'random') {
		elements.forEach( a => {
			a.data[valueField] = Math.random();
		});
	}
	
	elements.sort((a, b) => (a.data[valueField] === undefined) ? +1 : String(a.data[valueField]).localeCompare(b.data[valueField], [], {caseFirst:false, numeric:true}) * (reverseSort ? -1 : 1) ).forEach( element => {
		//console.log(String(element.data[valueField]));
		container.appendChild(element);
	});
	
	//makeEmpties(container);
}



function parseIntString(value) {
	// Remove thousands separators
	// https://stackoverflow.com/questions/11665884/how-can-i-parse-a-string-with-a-comma-thousand-separator-to-a-number/43448891#comment15461327_11665915
	// This regex is so smooth and clever... I love it.
	value = value.replace(/(\d+),(?=\d{3}(\D|$))/g, "$1");
	return parseInt(value, 10);
}

var POKEDEX;
var SORT_CONTAINER = null
var SORT_ELEMENTS = [];

this.onload = function() {

	var sortHeader = document.querySelector('#sort-header');
	if (sortHeader) {
		addSortHeader(sortHeader, 'id', "ID", 'pokedexID2').classList.add('ascending');
		addSortHeader(sortHeader, 'cp', "CP", 'cp');
		addSortHeader(sortHeader, 'max-cp', "MAX CP", 'cpMax');
	}
	
	var ignore = [
		"ID_FULL",
		"DARMANITAN_ZEN",
		"KYUREM_BLACK",
		"GENESECT_BURN",
		"GENESECT_CHILL",
		"GENESECT_DOUSE",
		"GENESECT_NORMAL",
		"GENESECT_SHOCK",
		"SAWSBUCK",

	];

	var container = document.querySelector('.pokemon-container.auto');
	SORT_CONTAINER = container;
	var pokedex = new Pokedex(container);
	POKEDEX = pokedex; //TEMP
	const tall = true;
	if (tall) {
		container.className += " tall";
		pokedex.displayCP = true;
		pokedex.displayMaxCP = true;
		pokedex.displayLVL = 'hover-show';
		pokedex.displayLeague = false;
	} else {
		pokedex.displayCP = 'hover-hide';
		pokedex.displayLVL = 'hover-show';
		pokedex.displayLeague = false;
	}
	
	var pokemon_all_family = [];
	all_family.forEach( data => {
	
		var ID_FULL = data['ID_FULL'];
		var MAX_LVL = (data['MAX_LVL'] == "") ? 0 : parseIntString(data['MAX_LVL']);
		var CAN_EVOLVE = (data['CAN_EVOLVE'] == "") ? 0 : parseIntString(data['CAN_EVOLVE']);

		if (ignore.indexOf(ID_FULL) !== -1) {
			return;
		}

		// Check for duplicates
		var existingMatch = pokemon_all_family.find( p => p.ID_FULL == ID_FULL );
		if (existingMatch) {
			console.log("Skipping duplicate Pokemon:", ID_FULL);
			return;
		}
		
		var pokemon = Pokemon.searchByID(ID_FULL);
		if (!pokemon) {
			return;
		}
		
		if (MAX_LVL) {
			pokemon.lvl = MAX_LVL;
			pokemon.atkIV = 15;
			pokemon.defIV = 15;
			pokemon.staIV = 15;
		} else if (pokemon.unreleased) {
			return;
		} else {
			pokemon.disabled = true;
		}
		
		if (data["EVO_CANDY"] != "" && CAN_EVOLVE == 0) {
			pokemon.mystery = true;
		}
		
		
		pokemon_all_family.push(pokemon);
		var element = pokedex.addPokemon(pokemon);
		SORT_ELEMENTS.push(element);
		//return Pokemon.auto2( p );
	});
	
	/*pokemon_all_family.forEach( p => {
		pokedex.addPokemon(p);
	});*/
	
	
	//pokedex.sortBy('pokedexID2', SORT_ASC);
	sortElementsBy(SORT_CONTAINER, SORT_ELEMENTS, 'pokedexID2')
	
}
		
		
	</script>

</head>
<body>
	
	<div class="sort-header" id="sort-header">
		<span>SORT BY</span>
		<!--<a href="#sort=id;asc">ID</a>
		<a href="#sort=cp;desc">CP</a>
		<a href="#sort=cpMax;desc">MAX CP</a>-->
	</div>
	<div class="sort-header-padding"></div>
	<div class="instructions">
		<img src="../assets/instructions/family_all_instructions.png" />
	</div>
	<div class='pokemon-container auto'></div>

</body>

</html>
